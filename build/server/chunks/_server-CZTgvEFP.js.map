{"version":3,"file":"_server-CZTgvEFP.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/matches/_server.js"],"sourcesContent":["import { d as db, m as matches, a as matchParticipants } from \"../../../../chunks/schema.js\";\nimport { json } from \"@sveltejs/kit\";\nasync function POST({ request }) {\n  const data = await request.json();\n  console.log(data);\n  const { teamA, teamB, teamAScore, teamBScore } = data;\n  const matchInsert = await db.insert(matches).values({\n    teamAScore,\n    teamBScore\n  }).returning({ id: matches.id });\n  const matchId = matchInsert[0].id;\n  const participants = [\n    ...teamA.map((playerId) => ({ matchId, playerId, team: \"A\" })),\n    ...teamB.map((playerId) => ({ matchId, playerId, team: \"B\" }))\n  ];\n  await db.insert(matchParticipants).values(participants);\n  return json({ success: true });\n}\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;AAEA,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,EAAE;AACjC,EAAE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACnC,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;AACnB,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAI;AACvD,EAAE,MAAM,WAAW,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;AACtD,IAAI,UAAU;AACd,IAAI;AACJ,GAAG,CAAC,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,CAAC;AAClC,EAAE,MAAM,OAAO,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE;AACnC,EAAE,MAAM,YAAY,GAAG;AACvB,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;AAClE,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACjE,GAAG;AACH,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;AACzD,EAAE,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AAChC;;;;"}