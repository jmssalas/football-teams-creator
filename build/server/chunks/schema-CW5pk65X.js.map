{"version":3,"file":"schema-CW5pk65X.js","sources":["../../../.svelte-kit/adapter-node/chunks/schema.js"],"sourcesContent":["import \"dotenv/config\";\nimport { drizzle } from \"drizzle-orm/better-sqlite3\";\nimport Database from \"better-sqlite3\";\nimport { sql } from \"drizzle-orm\";\nimport { sqliteTable, integer, text, index, primaryKey } from \"drizzle-orm/sqlite-core\";\nif (!process.env.DATABASE_URL) throw new Error(\"DATABASE_URL is not set\");\nconst client = new Database(process.env.DATABASE_URL);\nconst db = drizzle(client);\nconst players = sqliteTable(\"players\", {\n  id: integer(\"id\", { mode: \"number\" }).primaryKey({ autoIncrement: true }),\n  name: text(\"name\").notNull()\n});\nconst matches = sqliteTable(\n  \"matches\",\n  {\n    id: integer(\"id\", { mode: \"number\" }).primaryKey({\n      autoIncrement: true\n    }),\n    timestamp: integer(\"timestamp\", { mode: \"timestamp_ms\" }).default(\n      sql`(unixepoch()*1000)`\n    ),\n    teamAScore: integer(\"team_a_score\").notNull(),\n    teamBScore: integer(\"team_b_score\").notNull()\n  },\n  (table) => ({\n    idx_timestamp: index(\"idx_timestamp\").on(table.timestamp)\n  })\n);\nconst matchParticipants = sqliteTable(\n  \"match_participants\",\n  {\n    matchId: integer(\"match_id\").notNull().references(() => matches.id, { onDelete: \"cascade\" }),\n    playerId: integer(\"player_id\").notNull().references(() => players.id, { onDelete: \"cascade\" }),\n    team: text(\"team\").notNull()\n    // \"A\" = Team A, \"B\" = Team B\n  },\n  (table) => ({\n    pk: primaryKey({ columns: [table.matchId, table.playerId] }),\n    idx_match: index(\"idx_match\").on(table.matchId),\n    idx_player: index(\"idx_player\").on(table.playerId)\n  })\n);\nexport {\n  matchParticipants as a,\n  db as d,\n  matches as m,\n  players as p\n};\n"],"names":[],"mappings":";;;;;;AAKA,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC;AACzE,MAAM,MAAM,GAAG,IAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC;AAChD,MAAC,EAAE,GAAG,OAAO,CAAC,MAAM;AACpB,MAAC,OAAO,GAAG,WAAW,CAAC,SAAS,EAAE;AACvC,EAAE,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,UAAU,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC;AAC3E,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO;AAC5B,CAAC;AACI,MAAC,OAAO,GAAG,WAAW;AAC3B,EAAE,SAAS;AACX,EAAE;AACF,IAAI,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC,UAAU,CAAC;AACrD,MAAM,aAAa,EAAE;AACrB,KAAK,CAAC;AACN,IAAI,SAAS,EAAE,OAAO,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,CAAC,CAAC,OAAO;AACrE,MAAM,GAAG,CAAC,kBAAkB;AAC5B,KAAK;AACL,IAAI,UAAU,EAAE,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,EAAE;AACjD,IAAI,UAAU,EAAE,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO;AAC/C,GAAG;AACH,EAAE,CAAC,KAAK,MAAM;AACd,IAAI,aAAa,EAAE,KAAK,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS;AAC5D,GAAG;AACH;AACK,MAAC,iBAAiB,GAAG,WAAW;AACrC,EAAE,oBAAoB;AACtB,EAAE;AACF,IAAI,OAAO,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;AAChG,IAAI,QAAQ,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,MAAM,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,EAAE,CAAC;AAClG,IAAI,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO;AAC9B;AACA,GAAG;AACH,EAAE,CAAC,KAAK,MAAM;AACd,IAAI,EAAE,EAAE,UAAU,CAAC,EAAE,OAAO,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC;AAChE,IAAI,SAAS,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;AACnD,IAAI,UAAU,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ;AACrD,GAAG;AACH;;;;"}