import{n as b,s as l,a as p}from"./utils.7i9iy7nq.js";const i=[];function _(e,r){return{subscribe:d(e,r).subscribe}}function d(e,r=b){let t=null;const o=new Set;function u(n){if(l(e,n)&&(e=n,t)){const c=!i.length;for(const s of o)s[1](),i.push(s,e);if(c){for(let s=0;s<i.length;s+=2)i[s][0](i[s+1]);i.length=0}}}function f(n){u(n(e))}function a(n,c=b){const s=[n,c];return o.add(s),o.size===1&&(t=r(u,f)||b),n(e),()=>{o.delete(s),o.size===0&&t&&(t(),t=null)}}return{set:u,update:f,subscribe:a}}function h(e){let r;return p(e,t=>r=t)(),r}export{h as g,_ as r,d as w};
